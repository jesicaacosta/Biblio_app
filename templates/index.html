<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca Personal</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />

    <!-- Incluyo Bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1 class="name_page">My Biblio</h1>
    <h3>Para amantes de la lectura</h3>

    <!-- Formulario para agregar un libro -->
    <div class="form_agregar_libro">
      <form action="{{ url_for('agregar') }}" method="POST">
        <input
          type="text"
          name="titulo"
          placeholder="Título del libro"
          required
        />
        <input
          type="text"
          name="autor"
          placeholder="Autor"
          required
          class="input_form"
        />
        <input
          type="number"
          name="estrellas"
          min="1"
          max="5"
          placeholder="Estrellas (1-5)"
          required
          class="input_form"
        />
        <input
          type="text"
          name="comienzo_de_lectura"
          placeholder="Fecha de inicio de lectura"
          class="input_form"
        />
        <input
          type="text"
          name="fin_de_lectura"
          placeholder="Fecha de fin de lectura"
          class="input_form"
        />
        <textarea
          name="descripcion"
          placeholder="Descripción o reseña"
          class="input_form"
        ></textarea>
        <button type="submit" class="myButtonAnimado">Agregar Libro</button>
      </form>
      <img
        src="{{ url_for('static', filename='images/pexels-seymasungr.jpg') }}"
        alt="Imagen de biblioteca"
      />
    </div>

    <!-- Lista de libros -->
    <h2>Libros en la Biblioteca</h2>
    <ul class="ul_libros">
      {% for libro in biblioteca %}
      <li>
        <strong class="titulo">Título:</strong> {{ libro['titulo'] }}<br />
        <strong>Autor:</strong> {{ libro['autor'] }}<br />
        <strong>Estrellas:</strong> {{ libro['estrellas'] }}<br />
        <strong>Comienzo de Lectura:</strong> {{ libro['comienzo_de_lectura']
        }}<br />
        <strong>Fin de Lectura:</strong> {{ libro['fin_de_lectura'] }}<br />
        <strong>Descripción:</strong> {{ libro['descripcion'] }}<br />
        <form
          action="{{ url_for('eliminar', index=loop.index0) }}"
          method="POST"
          style="display: inline"
        >
          <button
            type="submit"
            class="myButtonAnimado"
            onclick="return confirmarEliminacion()"
          >
            Eliminar
          </button>
        </form>
        <form
          action="{{ url_for('editar', index=loop.index0) }}"
          method="GET"
          style="display: inline"
        >
          <button type="submit" class="myButtonAnimado">Editar</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </body>

  <!-- escucha si hay una solicitud de eliminacion, confirma -->
  <script>
    function confirmarEliminacion() {
      return confirm("¿Estás seguro de que deseas eliminar este libro?");
    }
  </script>
</html>
